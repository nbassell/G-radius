!function(s){var t={};function e(i){if(t[i])return t[i].exports;var h=t[i]={i:i,l:!1,exports:{}};return s[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=s,e.c=t,e.d=function(s,t,i){e.o(s,t)||Object.defineProperty(s,t,{enumerable:!0,get:i})},e.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},e.t=function(s,t){if(1&t&&(s=e(s)),8&t)return s;if(4&t&&"object"==typeof s&&s&&s.__esModule)return s;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),2&t&&"string"!=typeof s)for(var h in s)e.d(i,h,function(t){return s[t]}.bind(null,h));return i},e.n=function(s){var t=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(t,"a",t),t},e.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},e.p="",e(e.s=0)}([function(s,t,e){"use strict";e.r(t);class i{constructor({ctx:s,x:t,y:e,dx:i,dy:h}){this.ctx=s,this.image=new Image,this.image.src="./assets/images/bullet.png",this.pos={x:t,y:e,dx:i,dy:h},this.size={x:25,y:25}}drawBullet(){this.ctx.drawImage(this.image,this.pos.x,this.pos.y,this.size.x,this.size.y)}update(){this.pos.x+=this.pos.dx,this.pos.y+=this.pos.dy}}const h=38,a=40,o=37,r=39,n=32;let l=!1,c=!1,d=!1,u=!1,p=!1;class y{constructor(s){this.player=s,this.handleKeyPress=this.handleKeyPress.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),document.onkeydown=this.handleKeyPress,document.onkeyup=this.handleKeyUp}handleKeyPress(s){switch(s.preventDefault(),s.keyCode){case h:l=!0;break;case a:c=!0;break;case o:d=!0;break;case r:u=!0;break;case n:p=!0}}handleKeyUp(s){switch(s.preventDefault(),s.keyCode){case h:l=!1;break;case a:c=!1;break;case o:d=!1;break;case r:u=!1;break;case n:p=!1}}}class m{constructor(s){this.ctx=s,this.image=new Image,this.image.src="./assets/images/drix.png",this.pos={x:500,y:220},this.size={x:50,y:50},this.bullets=[],this.fireable=!0,this.shoot=this.shoot.bind(this),this.xVel=4,this.yVel=6}drawPlayer(){this.ctx.drawImage(this.image,this.pos.x,this.pos.y,this.size.x,this.size.y),this.bullets.forEach((s,t)=>{s.drawBullet(),s.pos.x>1e3?this.bullets.splice(t,1):s.update()})}shoot(){p&&this.fireable&&(this.bullets.push(new i({ctx:this.ctx,x:this.pos.x+50,y:this.pos.y+15,dx:8,dy:0})),this.fireable=!1,setTimeout(()=>{this.fireable=!0},170))}updatePos(){this.moveUp(),this.moveDown(),this.moveLeft(),this.moveRight(),this.shoot()}moveUp(){l&&this.pos.y>0&&(this.pos.y-=this.yVel)}moveDown(){c&&this.pos.y+this.size.y<498&&(this.pos.y+=this.yVel)}moveLeft(){d&&this.pos.x>0&&(this.pos.x-=this.xVel)}moveRight(){u&&this.pos.x<1e3-this.size.x?this.pos.x+=this.xVel:this.pos.x<=0?this.pos.x:this.pos.x-=this.xVel-.35}}class x{constructor(s){this.ctx=s,this.background=new Image,this.background.src="./assets/images/muscle-cells.png",this.background.onload=(()=>{this.ctx.drawImage(this.background,0,0,1e3,500)}),this.scrollVal=0}drawBackground(){this.scrollVal>=1e3&&(this.scrollVal=0),this.scrollVal+=4.5,this.ctx.fillStyle="#8B1C15",this.ctx.fillRect(0,0,1e3,500),this.ctx.drawImage(this.background,-this.scrollVal,0,1e3,500),this.ctx.drawImage(this.background,1e3-this.scrollVal,0,1e3,500)}}class g{constructor(s,t){this.ctx=s,this.idx=t,this.image=new Image,this.image.src="./assets/images/artery-wall.png",this.pos={x:1010,y:100*this.idx},this.size={x:120,y:100}}drawSection(){this.pos.x-=3,this.ctx.drawImage(this.image,this.pos.x,this.pos.y,this.size.x,this.size.y)}}class b extends g{constructor(s,t){super(s,t),this.image=new Image,this.image.src="./assets/images/plaque-in-artery.png",this.health=4}}class w{constructor(s){this.ctx=s,this.speed=5,this.sections=this.setColumn(),this.destructibleIdx=null}setColumn(){let s=Math.floor(5*Math.random()),t=[],e=0;for(;e<5;)e===s?t.push(new b(this.ctx,e)):t.push(new g(this.ctx,e)),e++;return this.pos={x:t[0].pos.x},this.size={x:t[0].size.x},t}drawColumn(){this.pos={x:this.sections[0].pos.x<1050?this.sections[0].pos.x:this.sections[1].pos.x},this.sections.forEach(s=>{null!==s&&s.drawSection()})}}var f={isCollided(s,t){const e=t.pos.x,i=t.pos.x+t.size.x,h=s.pos.x+.25*s.size.x,a=s.pos.x+.75*s.size.x,o=t.pos.y,r=t.pos.y+t.size.y,n=s.pos.y+.2*s.size.y;return!(s.pos.y+.75*s.size.y<o||n>r||a<e||h>i)},isCollidedLeft(s,t){const e=t.pos.x+t.size.x,i=s.pos.x,h=s.pos.x+s.size.x;return i<=e&&h>e},isCollidedRight(s,t){const e=t.pos.x,i=s.pos.x+s.size.x,h=s.pos.x;return i>=e&&h<e},isCollidedY(s,t){const e=s.pos.y,i=s.pos.y+s.size.y,h=t.pos.y,a=t.pos.y+t.size.y;return!(i<h||e>a)}};class k{constructor(s){this.ctx=s,this.image=new Image,this.image.src="./assets/images/virus.png",this.xVel=-5,this.yVel=4*(0===Math.floor(2*Math.random())?1:-1),this.size={x:45,y:45},this.pos={x:980,y:Math.floor(Math.random()*(500-this.size.y))}}drawVirus(){this.pos.x+=this.xVel,this.pos.y+=this.yVel,this.ctx.drawImage(this.image,this.pos.x,this.pos.y,this.size.x,this.size.y)}}class C{constructor(s,t){this.ctx=s,this.idx=t,this.image=new Image,this.image.src="./assets/images/artery-wall.png",this.pos={x:1050,y:100*this.idx},this.size={x:0,y:0}}drawSection(){}}class v{constructor(s,t){this.ctx=s,this.canvas=t,this.player=new m(s),this.keyHandler=new y(this.player),this.background=new x(s),this.play=this.play.bind(this),this.columnCollisionCheck=this.columnCollisionCheck.bind(this),this.bulletCollisionCheck=this.bulletCollisionCheck.bind(this),this.virusPlayerCheck=this.virusPlayerCheck.bind(this),this.virusWallCheck=this.virusWallCheck.bind(this),this.addKeyListeners=this.addKeyListeners.bind(this),this.restartGame=this.restartGame.bind(this),this.isRestarted=this.isRestarted.bind(this),this.bullets=[],this.columns=[],this.viruses=[],this.timer=0,this.score=document.getElementById("score"),this.play_again=document.getElementsByClassName("play-again-btn")[0],this.start_btn=document.getElementsByClassName("start-btn")[0],this.instructions=document.getElementsByClassName("instruction")[0],this.score.innerHTML="0",this.dead=!1}start(){this.addKeyListeners()}restartGame(s){this.start_btn.classList.add("hide"),this.background.drawBackground(),this.bullets=[],this.columns=[],this.viruses=[],this.timer=0,this.state={paused:!1},this.player.pos.x=500,this.player.pos.y=220,this.player.xVel=4,this.player.xYel=6,this.dead=!1,this.play_again.classList.add("hide"),this.score.innerHTML="0",window.removeEventListener("keydown",this.isRestarted),this.play()}updateScore(){this.score.innerHTML=parseInt(this.score.innerHTML)+1}addKeyListeners(){this.play_again.addEventListener("click",this.restartGame),this.start_btn.addEventListener("click",this.restartGame),window.addEventListener("keydown",this.isRestarted)}isRestarted(s){13===s.keyCode&&this.restartGame()}togglePause(){this.paused=this.paused=!1}spawnColumn(){this.timer%180==0&&this.columns.push(new w(this.ctx))}spawnVirus(){this.timer%180==60&&this.timer>800&&this.viruses.push(new k(this.ctx))}columnCollisionCheck(){this.columns.forEach(s=>{s.sections.forEach(s=>{f.isCollided(this.player,s)&&this.gameOver()})})}bulletCollisionCheck(){this.columns.forEach((s,t)=>{s.sections.forEach((s,e)=>{this.player.bullets.forEach((i,h)=>{f.isCollided(i,s)&&(s.health&&(s.health-=1,s.health<=0&&(this.columns[t].sections[e]=new C)),this.player.bullets.splice(h,1))})})})}virusPlayerCheck(){this.viruses.forEach(s=>{f.isCollided(this.player,s)&&this.gameOver()})}virusWallCheck(){this.columns.forEach(s=>{this.viruses.forEach(t=>{f.isCollidedLeft(t,s)&&t.xVel<0&&(t.xVel=Math.abs(t.xVel)),f.isCollidedRight(t,s)&&t.xVel>0&&(t.xVel=-1*Math.abs(t.xVel)),t.pos.x+t.size.x>=1e3&&t.xVel>0&&(t.xVel=-1*Math.abs(t.xVel)),t.pos.y<=0&&(t.yVel=Math.abs(t.yVel)),t.pos.y+t.size.y>=499&&(t.yVel=-1*Math.abs(t.yVel))})})}columnOutCheck(){this.columns.forEach((s,t)=>{s.pos.x+s.size.x<0&&this.columns.splice(t,1)})}virusOutCheck(){this.viruses.forEach((s,t)=>{(s.pos.x+s.size.x<0||s.pos.y+s.size.y<0||s.pos.y>1e3)&&this.viruses.splice(t,1)})}gameOver(){this.addKeyListeners(),this.dead=!0}showMessage(s){this.ctx.fillStyle="rgba(0, 0, 0, 0.4)",this.ctx.fillRect(0,0,1e3,500),this.ctx.font="50px Luckiest Guy",this.ctx.fillStyle="bisque",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(s,500,250)}requestAnimFrame(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(s){window.setTimeout(s,50)}}play(){this.update(),this.render(),this.dead?(this.showMessage(`Game Over!  Final Score: ${this.score.innerHTML}`),this.play_again.classList.remove("hide")):this.requestAnimFrame()(this.play.bind(this))}update(){this.timer++,this.updateScore(),this.spawnColumn(),this.spawnVirus(),this.columnCollisionCheck(),this.bulletCollisionCheck(),this.virusWallCheck(),this.virusPlayerCheck(),this.columnOutCheck(),this.virusOutCheck()}render(){this.background.drawBackground(),this.player.drawPlayer(),this.player.updatePos(),this.bullets.forEach(s=>{s.drawBullet()}),this.columns.forEach(s=>{s.drawColumn()}),this.viruses.forEach(s=>{s.drawVirus()})}}e.d(t,"W",function(){return z}),e.d(t,"H",function(){return V});const z=1e3,V=500;document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("canvas"),t=s.getContext("2d");s.width=z,s.height=V,document.getElementsByClassName("play-again-btn")[0].classList.add("hide");const e=new v(t,s);new x(t).drawBackground(),e.start()})}]);
//# sourceMappingURL=bundle.js.map